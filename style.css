/*
 Theme Name:   Smilefx Bricks Child Theme
 Theme URI:    https://smilefx.io/
 Description:  A powerful child theme for Bricks, designed to extend and customize your WordPress site with advanced features, performance optimizations, and seamless integration with enhanced tools.
 Author:       Daniel Sänger (smilefx.io)
 Author URI:   https://smilefx.io/
 Template:     bricks
 Version:      0.9.0_rc
 Text Domain:  sfxtheme
 GitHub Theme URI: https://github.com/dsnger/sfx-bricks-child
 GitHub Branch:   main
*/

html {
  -webkit-text-size-adjust: 100%;
  -moz-text-size-adjust: 100%;
  text-size-adjust: 100%;
}

body,
*::before,
*::after {
  /* Font smoothing - only apply to text elements for better performance */
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;

  /* Text rendering */
  text-rendering: optimizeLegibility;
}

/* Apply backface-visibility only to elements that need it */
body {
  min-height: 100vh;
  min-height: 100svh;
  min-height: 100dvh;
  -webkit-backface-visibility: hidden;
  backface-visibility: hidden;
}

/* fix P margins in Bricks Blocks */
.brxe-block>p {
  margin: 0;
}

/* ========================================
   FORM STYLES (nested)
   ======================================== */

:is(.brxe-form, .brxe-brf-pro-forms) {

  /* Base sizes for inputs/selects */
  & input[type="text"],
  & input[type="email"],
  & input[type="url"],
  & input[type="tel"],
  & input[type="search"],
  & input[type="password"],
  & input[type="number"],
  & input[type="date"],
  & input[type="datetime-local"],
  & input[type="month"],
  & input[type="week"],
  & input[type="time"],
  & select {
    min-height: var(--form-input-height, 42px);
  }

  & label {
    margin-bottom: calc(var(--global-gutter-small) / 2) !important;
  }

  & .form-group {
    & label {
      font-size: var(--form-label-font-size);
      line-height: var(--form-label-line-height);
      text-transform: none;
      font-weight: var(--form-label-font-weight);
      color: var(--primary);
    }

    & input {
      padding-top: var(--form-padding-v);
      padding-right: var(--form-padding-h);
      padding-bottom: var(--form-padding-v);
      padding-left: var(--form-padding-h);
      border: var(--form-border-width) solid var(--primary);
      border-radius: var(--form-border-radius);
      font-size: var(--form-font-size);
      line-height: var(--form-line-height);
      background-color: var(--bg-surface);
    }

    & .options-wrapper {
      display: flex;
      gap: var(--space-xs);

      & > li:has([type=radio]) {
        align-items: center !important;
        gap: 0.5rem !important;

        & label {
          margin: 0 !important;
        }
      }
    }
  }

  & ::placeholder {
    font-size: var(--form-placeholder-font-size);
    font-weight: 400;
    line-height: var(--form-placeholder-line-height);
    color: var(--primary);
  }

  & .bricks-button {
    padding-top: var(--btn-padding-v);
    padding-right: var(--btn-padding-h);
    padding-bottom: var(--btn-padding-v);
    padding-left: var(--btn-padding-h);
    border: var(--form-border-width) solid var(--primary);
    border-radius: var(--form-border-radius);
  }

  /* File upload styles */
  & input[type="file"] {
    position: absolute;
    opacity: 0;
    width: 0.1px;
    height: 0.1px;
    overflow: hidden;
    z-index: -1;

    &:focus + .choose-files {
      outline: var(--form-focus-width, 2px) solid var(--form-focus-color, #2563eb);
      outline-offset: var(--form-focus-offset, 2px);
      box-shadow: var(--form-focus-ring);
      border-color: var(--form-focus-color, #2563eb);
    }
  }

  & .choose-files {
    display: inline-flex;
    align-items: center;
    justify-content: center;
    min-height: var(--form-input-height, 42px);
    padding: 0 1rem;
    border: var(--form-border-width, 1px) solid var(--form-border-color, #e5e7eb);
    border-radius: var(--radius-s, .35rem);
    background: var(--form-input-bg, #fff);
    color: var(--form-color, #111);
    cursor: pointer;
    transition: all .15s ease;
    font-size: inherit;
    font-family: inherit;
    text-decoration: none;
    margin-bottom: 0 !important;
    user-select: none;

    &:hover {
      border-color: var(--form-radio-active-color, #2563eb);
      background: color-mix(in srgb, var(--form-radio-active-color, #2563eb) 5%, var(--form-input-bg, #fff));
    }

    &:focus {
      outline: var(--form-focus-width, 2px) solid var(--form-focus-color, #2563eb);
      outline-offset: var(--form-focus-offset, 2px);
      box-shadow: var(--form-focus-ring);
      border-color: var(--form-focus-color, #2563eb);
    }
  }

  & .file-result {
    display: none;
    align-items: center;
    gap: 0.75rem;
    padding: 0.75rem;
    border: var(--form-border-width, 1px) solid var(--form-border-color, #e5e7eb);
    border-radius: var(--radius-s, .35rem);
    background: var(--form-input-bg, #fff);
    margin-bottom: 0.5rem;
    transition: all .15s ease;

    &.show {
      display: flex;
    }

    & .text {
      flex: 1;
      color: var(--form-color, #111);
      font-size: 0.9em;
      word-break: break-all;
    }

    & .remove {
      display: inline-flex;
      align-items: center;
      justify-content: center;
      padding: 0.5rem;
      background: var(--error);
      border: var(--form-border-width, 1px) solid var(--error);
      border-radius: var(--radius-s, .35rem);
      color: #dc2626;
      cursor: pointer;
      transition: all .15s ease;
      font-size: 0.8em;
      min-height: auto;
      margin: 0;

      &:hover {
        background: #dc2626;
        color: white;
        border-color: #dc2626;
      }

      &:focus {
        outline: var(--form-focus-width, 2px) solid var(--form-focus-color, #2563eb);
        outline-offset: var(--form-focus-offset, 2px);
        box-shadow: var(--form-focus-ring);
      }
    }

    & svg {
      width: 16px;
      height: 16px;
      stroke: currentColor;
      margin-left: 0.25rem;
    }

    &.error {
      border-color: #dc2626;
      background: color-mix(in srgb, #dc2626 5%, var(--form-input-bg, #fff));

      & .text {
        color: #dc2626;
      }
    }

    &.success {
      border-color: #16a34a;
      background: color-mix(in srgb, #16a34a 5%, var(--form-input-bg, #fff));

      & .text {
        color: #16a34a;
      }
    }
  }

  & .form-group.file {
    display: flex;
    flex-direction: column;
    gap: 0.5rem;
  }

  /* Checkbox & Radio base */
  & input[type="checkbox"],
  & input[type="radio"] {
    appearance: none;
    inline-size: calc(var(--form-input-height, 42px) * .4);
    block-size: calc(var(--form-input-height, 42px) * .4);
    margin: 0;
    padding: 0;
    vertical-align: middle;
    border: var(--form-border-width, 1px) solid var(--form-border-color, #e5e7eb);
    background: var(--form-input-bg, #fff);
    position: relative;
    transition: background-color .15s, border-color .15s;
    color: var(--form-color, #111);
    flex-shrink: 0;

    &:is(:focus, :focus-visible) {
      outline: var(--form-focus-width) solid var(--form-focus-color);
      outline-offset: var(--form-focus-offset);
      box-shadow: var(--form-focus-ring);
      border-color: var(--form-focus-color);
    }
  }

  /* Checkbox specific */
  & input[type="checkbox"] {
    border-radius: var(--radius-s, .35rem);

    &:checked {
      background: var(--form-radio-active-color, #2563eb);
      border-color: var(--form-radio-active-color, #2563eb);
      color: var(--form-icon-color, #fff);
      background-image: var(--form-checkbox-icon, url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='16' height='16' viewBox='0 0 16 16'%3E%3Cpath fill='white' d='m14.914 4l-9.47 9.47L1.09 8.393L2.608 7.09l2.948 3.44L13.5 2.585z'/%3E%3C/svg%3E"));
      background-repeat: no-repeat;
      background-position: center;
      background-size: var(--form-icon-scale, 70%) var(--form-icon-scale, 70%);
    }

    &:indeterminate {
      background: var(--form-radio-active-color, #2563eb);
      border-color: var(--form-radio-active-color, #2563eb);
      color: var(--form-icon-color, #fff) !important;
      background-image: linear-gradient(currentColor, currentColor);
      background-repeat: no-repeat;
      background-position: center;
      background-size: 60% 2px;
    }
  }

  /* Radio specific */
  & input[type="radio"] {
    border-radius: 50%;

    &:checked {
      background: var(--form-radio-active-color, #2563eb);
      border-color: var(--form-radio-active-color, #2563eb);
      background-image: radial-gradient(circle, var(--form-icon-color, #fff) 0 50%, transparent 51%);
      background-repeat: no-repeat;
      background-position: center;
      background-size: 52% 52%;
    }
  }

  /* Textarea */
  & textarea {
    resize: vertical;
    max-width: 100%;
    overflow: auto;
  }

  /* Messages & submit feedback */
  & .message {
    border-radius: var(--form-border-radius, .5rem);
  }

  & button[type="submit"].sending,
  & input[type="submit"].sending {
    gap: 8px;
  }
}

/* Lower specificity form group defaults */
:where(.brxe-form, .brxe-brf-pro-forms) {
  & .form-group {
    display: flex;
    flex-direction: column;
    padding: 0 0 var(--form-group-spacing, 20px);
    width: 100%;
  }

  & .submit-button-wrapper {
    width: auto;
    margin-left: auto;
  }
}


/* Global accessible focus (optional but recommended) */
:where(input, select, textarea, button, [role="button"], .button) {
  &:is(:focus, :focus-visible) {
    outline: var(--form-focus-width) solid var(--form-focus-color);
    outline-offset: var(--form-focus-offset);
    box-shadow: var(--form-focus-ring);
  }

  &:focus:not(:focus-visible) {
    outline: none;
    box-shadow: none;
  }
}

/* High contrast / Windows HC */
@media (forced-colors: active) {
  :where(input, select, textarea, button, [role="button"], .button):is(:focus, :focus-visible) {
    outline: 2px solid CanvasText;
    outline-offset: 2px;
    box-shadow: none;
  }
}

/* User prefers more contrast */
@media (prefers-contrast: more) {
  :where(input, select, textarea, button, [role="button"], .button):focus-visible {
    outline-width: max(3px, var(--form-focus-width));
    box-shadow: var(--form-focus-ring);
  }
}

/* ========================================
   BUTTON STYLES (nested)
   ======================================== */

:is(.brxe-button.bricks-button, .brxe-button.btn) {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  gap: var(--btn-gap, var(--space-4xs));
  padding-block: var(--btn-padding-block, var(--space-3xs));
  padding-inline: var(--btn-padding-inline, var(--space-s));
  font-size: var(--btn-font-size, var(--text-m));
  font-weight: var(--btn-font-weight, 700);
  line-height: var(--btn-line-height, var(--line-height-s));
  letter-spacing: var(--btn-letter-spacing, 0.01%);
  text-decoration: none;
  text-wrap: nowrap;
  white-space: nowrap;
  border-width: var(--btn-border-width, 1px);
  border-style: var(--btn-border-style, solid);
  border-radius: var(--btn-radius, var(--radius-m));
  box-shadow: var(--btn-shadow, var(--shadow-s));
  transition: var(--btn-transition, all 0.25s ease-in-out);
  cursor: pointer;
  user-select: none;
  outline: 0;

  &:focus-visible {
    outline: var(--btn-outline-border-width, 2px) solid var(--secondary);
    outline-offset: 2px;
  }

  &:disabled {
    cursor: not-allowed;
    opacity: 0.5;
    pointer-events: none;
  }

  /* Solid background hover states */
  &[class*="bricks-background-"] {
    &:hover {
      transform: translateY(-1px);
      box-shadow: var(--btn-shadow--hover, var(--shadow-m));
    }

    &:active {
      transform: translateY(0);
    }
  }

  &.bricks-background-primary {
    color: var(--primary-fg);
    &:hover { background-color: color-mix(in oklab, var(--primary) 85%, black); }
    &:active { background-color: color-mix(in oklab, var(--primary) 75%, black); }
  }

  &.bricks-background-secondary {
    color: var(--secondary-fg);
    &:hover { background-color: color-mix(in oklab, var(--secondary) 85%, black); }
    &:active { background-color: color-mix(in oklab, var(--secondary) 75%, black); }
  }

  &.bricks-background-light {
    color: var(--dark);
    &:hover { background-color: color-mix(in oklab, var(--light) 85%, black); }
    &:active { background-color: color-mix(in oklab, var(--light) 75%, black); }
  }

  &.bricks-background-dark {
    color: var(--light);
    &:hover { background-color: color-mix(in oklab, var(--dark) 85%, white); }
    &:active { background-color: color-mix(in oklab, var(--dark) 75%, white); }
  }

  &.bricks-background-muted {
    color: var(--muted-fg);
    &:hover { background-color: color-mix(in oklab, var(--muted) 85%, black); }
    &:active { background-color: color-mix(in oklab, var(--muted) 75%, black); }
  }

  &.bricks-background-info {
    color: var(--info-fg);
    &:hover { background-color: color-mix(in oklab, var(--info) 90%, black); }
    &:active { background-color: color-mix(in oklab, var(--info) 85%, black); }
  }

  &.bricks-background-success {
    color: var(--success-fg);
    &:hover { background-color: color-mix(in oklab, var(--success) 85%, black); }
    &:active { background-color: color-mix(in oklab, var(--success) 75%, black); }
  }

  /* Outline variants */
  &.outline {
    background-color: transparent;
    border-width: var(--btn-border-width, 1px);

    &[class*="bricks-color-"]:hover {
      transform: translateY(-1px);
    }

    &.bricks-color-primary {
      border-color: var(--primary);
      color: var(--primary);

      &:hover {
        background-color: var(--primary);
        color: var(--primary-fg);
      }
    }

    &.bricks-color-secondary {
      border-color: var(--secondary);
      color: var(--secondary);

      &:hover {
        background-color: var(--secondary);
        color: var(--secondary-fg);
      }
    }

    &.bricks-color-light {
      border-color: var(--light);
      color: var(--light);

      &:hover {
        background-color: var(--light);
        color: var(--dark);
      }
    }

    &.bricks-color-dark {
      border-color: var(--dark);
      color: var(--dark);

      &:hover {
        background-color: var(--dark);
        color: var(--light);
      }
    }

    &.bricks-color-muted {
      border-color: var(--muted);
      color: var(--muted);

      &:hover {
        background-color: var(--muted);
        color: var(--muted-fg);
      }
    }

    &.bricks-color-info {
      border-color: var(--info);
      color: var(--info);

      &:hover {
        background-color: var(--info);
        color: var(--info-fg);
      }
    }

    &.bricks-color-success {
      border-color: var(--success);
      color: var(--success);

      &:hover {
        background-color: var(--success);
        color: var(--success-fg);
      }
    }
  }

  /* Sizes */
  &.sm {
    padding-block: var(--btn-s-padding-block, var(--space-4xs));
    padding-inline: var(--btn-s-padding-inline, var(--space-xs));
    font-size: var(--btn-s-font-size, var(--text-s));
    border-radius: var(--btn-s-radius, var(--radius-s));
  }

  &.md {
    padding-block: var(--btn-padding-block, var(--space-3xs));
    padding-inline: var(--btn-padding-inline, var(--space-s));
    font-size: var(--btn-font-size, var(--text-m));
    border-radius: var(--btn-radius, var(--radius-m));
  }

  &.lg {
    padding-block: var(--btn-l-padding-block, var(--space-2xs));
    padding-inline: var(--btn-l-padding-inline, var(--space-m));
    font-size: var(--btn-l-font-size, var(--text-l));
    border-radius: var(--btn-l-radius, var(--radius-m));
  }

  &.xl {
    padding-block: var(--space-xs, 0.75rem);
    padding-inline: var(--space-l, 2rem);
    font-size: var(--text-xl, 1.25rem);
  }

  /* Modifiers */
  &.full-width {
    width: 100%;
  }

  &.icon-only {
    padding-inline: var(--btn-padding-block, var(--space-3xs));
    aspect-ratio: 1;
  }

  &.loading {
    position: relative;
    color: transparent;
    pointer-events: none;

    &::after {
      content: "";
      position: absolute;
      width: 1em;
      height: 1em;
      border: 2px solid currentColor;
      border-radius: 50%;
      border-top-color: transparent;
      animation: button-spin 0.6s linear infinite;
      inset: 0;
      margin: auto;
    }
  }

  &.rounded-full {
    border-radius: 9999px;
  }
}

@keyframes button-spin {
  to { transform: rotate(360deg); }
}

/* Arrow icon animation */
:is(.brxe-button.bricks-button, .btn--text) {
  & > i.fa-arrow-right {
    transition: all .3s ease;
  }

  &:hover > i.fa-arrow-right {
    padding-left: 4px;
  }
}

/* base list icon styles */

:is(.list--icon, .brxe-text) ul {
  list-style: none;
  padding: 0;
  margin-block: var(--global-gutter);
  margin-inline-start: var(--list-indent);
  display: flex;
  flex-direction: column;
  gap: var(--list-gap);
}

:is(.list--icon, .brxe-text) ul:last-child {
  margin-block-end: 0;
}

:is(.list--icon, .brxe-text) ul li+li {
  margin-block-start: var(--article-gutter-vertical-xsmall);
}

:is(.list--icon, .brxe-text) li {
  display: grid;
  grid-template-columns: auto minmax(0,1fr);
  gap: var(--icon-gap);
  margin-block-start: 0;
  
  &::before {
    content: '';
    display: var(--icon-display);
    width: var(--icon-size);
    height: var(--icon-size);
    background-color: var(--icon-color);
    -webkit-mask-image: var(--icon-url);
    mask-image: var(--icon-url);
    mask-size: cover;
    translate: var(--icon-offset); 
    z-index: 1;
   }
  &::after {
    content: '';
    position: absolute;
    z-index: 0;
    width: calc(var(--icon-size) + 8px);
    height: calc(var(--icon-size) + 8px);
    background-color: var(--icon-bg-color);
    translate: var(--icon-bg-offset);
    border-radius: var(--radius-full);
  }
}



/* custom list icon types */
:is(.list--icon, .brxe-text).is-check {
  --icon-url: var(--list-check-icon-url, url(''));
  --icon-color: var(--list-check-icon-color, var(--secondary));
  --icon-offset: var(--list-check-icon-offset, 0 .5ex);
  --icon-size: var(--list-check-icon-size, 1em);
  --icon-gap: var(--list-check-icon-gap, 15px);
  --icon-display: var(--list-check-icon-display, flex);
  --list-indent: var(--list-check-indent, .5em);
  --list-gap: var(--list-check-gap, var(--space-3));
  --icon-bg-offset: var(--list-check-icon-bg-offset, -.4ex 0);
  --icon-bg-color: var(--list-check-icon-bg-color, var(--tertiary-l-4));
}

.card[class*="bg-secondary"] :is(.list--icon, .brxe-text).is-check {
  --icon-color: var(--list-check-icon-color, var(--secondary));
  --icon-bg-color: var(--list-check-icon-bg-color-alt, var(--secondary-10));
}


/* Avoid FUC on frontend*/
.bricks-is-frontend .animation-trigger {
  opacity: 0;
}
 
/* Animated Class*/
.animate {
  animation-name: fadeAnimation;
  animation-delay: calc(var(--animate-delay, 0) * var(--animate-delay-step, 200ms));
  animation-duration: var(--animate-duration, 400ms);
  animation-timing-function: ease-in-out;
  animation-fill-mode: both;
}

/* Animation direction variables */
:root {
  --animate-fade-from-translate: 0, 0, 0;
  --animate-fade-to-translate: 0, 0, 0;
}

.animation--left-to-right {
  --animate-fade-from-translate: calc(-1 * var(--animate-distance, 20px)), 0, 0;
}
.animation--right-to-left {
  --animate-fade-from-translate: var(--animate-distance, 20px), 0, 0;
}
.animation--top-to-bottom {
  --animate-fade-from-translate: 0, calc(-1 * var(--animate-distance, 20px)), 0;
}
.animation--bottom-to-top {
  --animate-fade-from-translate: 0, var(--animate-distance, 20px), 0;
}


:where(.stagger) { --animate-delay-step: 200ms; }
.stagger > * { --animate-delay: 0; }

/* vorwärts */
.stagger > *:nth-child(1)  { --animate-delay: 0 }
.stagger > *:nth-child(2)  { --animate-delay: 1 }
.stagger > *:nth-child(3)  { --animate-delay: 2 }
.stagger > *:nth-child(4)  { --animate-delay: 3 }
.stagger > *:nth-child(5)  { --animate-delay: 4 }
.stagger > *:nth-child(6)  { --animate-delay: 5 }
.stagger > *:nth-child(7)  { --animate-delay: 6 }
.stagger > *:nth-child(8)  { --animate-delay: 7 }
.stagger > *:nth-child(9)  { --animate-delay: 8 }
.stagger > *:nth-child(10) { --animate-delay: 9 }
.stagger > *:nth-child(11) { --animate-delay: 10 }
.stagger > *:nth-child(12) { --animate-delay: 11 }

 
/* Keyframes */
@keyframes fadeAnimation {
  from {
    transform: translate3d(var(--animate-fade-from-translate));
    opacity: 0;
  }
  to {
    opacity: 1;
    transform: translate3d(var(--animate-fade-to-translate));
  }
}


@keyframes simpleParallax {
  100% {
    transform: translateY(var(--animate-parallax, 0));
  }
}