/**
 * Pell - Simplest WYSIWYG editor
 * @version 1.0.6
 * @license MIT
 * @see https://github.com/jaredreich/pell
 */
(function(global,factory){typeof exports==="object"&&typeof module!=="undefined"?factory(exports):typeof define==="function"&&define.amd?define(["exports"],factory):(global=global||self,factory(global.pell={}))})(this,function(exports){"use strict";var _doc=document;var exec=function(command,value){if(value===void 0)value=null;return _doc.execCommand(command,false,value)};var defaultActions={bold:{icon:"<b>B</b>",title:"Bold",state:function(){return _doc.queryCommandState("bold")},result:function(){return exec("bold")}},italic:{icon:"<i>I</i>",title:"Italic",state:function(){return _doc.queryCommandState("italic")},result:function(){return exec("italic")}},underline:{icon:"<u>U</u>",title:"Underline",state:function(){return _doc.queryCommandState("underline")},result:function(){return exec("underline")}},strikethrough:{icon:"<strike>S</strike>",title:"Strike-through",state:function(){return _doc.queryCommandState("strikeThrough")},result:function(){return exec("strikeThrough")}},heading1:{icon:"<b>H<sub>1</sub></b>",title:"Heading 1",result:function(){return exec("formatBlock","<h1>")}},heading2:{icon:"<b>H<sub>2</sub></b>",title:"Heading 2",result:function(){return exec("formatBlock","<h2>")}},paragraph:{icon:"&#182;",title:"Paragraph",result:function(){return exec("formatBlock","<p>")}},quote:{icon:"&#8220; &#8221;",title:"Quote",result:function(){return exec("formatBlock","<blockquote>")}},olist:{icon:"&#35;",title:"Ordered List",result:function(){return exec("insertOrderedList")}},ulist:{icon:"&#8226;",title:"Unordered List",result:function(){return exec("insertUnorderedList")}},code:{icon:"&lt;/&gt;",title:"Code",result:function(){return exec("formatBlock","<pre>")}},line:{icon:"&#8213;",title:"Horizontal Line",result:function(){return exec("insertHorizontalRule")}},link:{icon:"&#128279;",title:"Link",result:function(){var url=window.prompt("Enter the link URL");if(url)exec("createLink",url)}},image:{icon:"&#128247;",title:"Image",result:function(){var url=window.prompt("Enter the image URL");if(url)exec("insertImage",url)}}};var defaultClasses={actionbar:"pell-actionbar",button:"pell-button",content:"pell-content",selected:"pell-button-selected"};var init=function(settings){var actions=settings.actions?settings.actions.map(function(action){if(typeof action==="string")return defaultActions[action];else if(defaultActions[action.name])return Object.assign({},defaultActions[action.name],action);return action}):Object.keys(defaultActions).map(function(action){return defaultActions[action]});var classes=Object.assign({},defaultClasses,settings.classes);var defaultParagraphSeparator=settings.defaultParagraphSeparator||"div";var actionbar=_doc.createElement("div");actionbar.className=classes.actionbar;settings.element.appendChild(actionbar);var content=_doc.createElement("div");content.contentEditable=true;content.className=classes.content;content.oninput=function(event){var firstChild=event.target.firstChild;if(firstChild&&firstChild.nodeType===3)exec("formatBlock","<"+defaultParagraphSeparator+">");else if(content.innerHTML==="<br>")content.innerHTML="";settings.onChange(content.innerHTML)};content.onkeydown=function(event){if(event.key==="Enter"&&_doc.queryCommandValue("formatBlock")==="blockquote"){setTimeout(function(){return exec("formatBlock","<"+defaultParagraphSeparator+">")},0)}};settings.element.appendChild(content);actions.forEach(function(action){var button=_doc.createElement("button");button.className=classes.button;button.innerHTML=action.icon;button.title=action.title;button.setAttribute("type","button");button.onclick=function(){return action.result()&&content.focus()};if(action.state){var handler=function(){return button.classList[action.state()?"add":"remove"](classes.selected)};actionbar.addEventListener("click",handler);content.addEventListener("keyup",handler);content.addEventListener("mouseup",handler);handler()}actionbar.appendChild(button)});if(settings.styleWithCSS)exec("styleWithCSS");exec("defaultParagraphSeparator",defaultParagraphSeparator);return{content:content}};exports.exec=exec;exports.init=init;Object.defineProperty(exports,"__esModule",{value:true})});
